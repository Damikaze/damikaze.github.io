<html>
    <head>
        <title>Application Vigenere</title>

        <meta charset="UTF-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <!--<link rel="stylesheet" href="//code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css">-->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
        <link rel="stylesheet" href="https://code.jquery.com/ui/1.10.4/themes/flick/jquery-ui.css">
        <link rel="stylesheet" href="css/main.css">
        <link rel="stylesheet" href="css/switch.css">
        <link rel="stylesheet" href="css/jquery-ui-slider-pips.css">
        <link rel="shortcut icon" href="img/favicon.ico">
    </head>
    <body>
        <div class="container">
            <!-- -- Accueil -- -->

            <div id="home">
                <div class="row">
                    <h1 id="titre">Chiffre de Vigenere : l'application</h1>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <button class="btn btn-default center-block" id="goto_part1">Crypter / Décrypter</button>
                    </div>
                    <div class="col-md-6">
                        <button class="btn btn-default center-block" id="goto_part2">Cryptanalyse</button>
                    </div>
                </div>
                <br/>
                <div class="row">
                    <button class="btn btn-warning center-block" data-toggle="modal" data-target="#modalPresentation">
                        Le chiffre de Vigenere, c'est quoi ?
                    </button>
                </div>
            </div>

            <!-- -- Cryptage / Décryptage -- -->

            <div id="part1" style="display:none;">
                <div class="row">
                    <button class="goto_home btn btn-primary col-xs-3">
                        <div class="hidden-xs hidden-sm">
                            <span class="glyphicon glyphicon-chevron-left"></span> Retour à la page d'accueil
                        </div>
                        <span class="visible-xs visible-sm glyphicon glyphicon-home"></span>
                    </button>
                </div>
                <br/>
                <div class="row">
                    <legend>Informations d'entrée</legend>
                    <label>Texte :</label>
                    <textarea rows=5 id="input" class="form-control"></textarea>
                </div>
                <br/>
                <div class="row">
                    <div class="form-group col-xs-3">
                        <label id="label_action" class="col-xs-12">Action</label>
                        <br/>
                        <span class="col-xs-12 label-interrupteur">Crypter</span>
                        <br/>
                        <div class="switch demo">
                            <input type="checkbox" id="interrupteur" checked="checked">
                            <label></label>
                        </div>
                        <span class="col-xs-12 label-interrupteur">Décrypter</span>
                    </div>
                    <div class="form-group col-xs-9">
                        <label for="cle" id="label_cle" class="col-sm-2 margintop">Clé:</label>
                        <div class="col-sm-7 nopadding">
                            <input type="text" id="cle1" name="cle" class="form-control"/>
                        </div>
                        <div class="col-sm-3">
                            <a id="action1" class="btn btn-primary col-xs-12">Crypter</a>
                        </div>
                    </div>
                </div>
                <br/>
                <div class="row">
                    <legend>Sortie</legend>
                    <textarea rows=5 id="output" class="form-control"></textarea>
                </div>
            </div>

            <!-- -- Cryptanalyse -- -->

            <div id="part2" style="display:none;">
                <!-- Boutons du haut -->
                <div class="row">
                    <button class="goto_home btn btn-primary col-sm-3 col-xs-2">
                        <div class="hidden-xs hidden-sm">
                            <span class="glyphicon glyphicon-chevron-left"></span> Retour à la page d'accueil
                        </div>
                        <span class="visible-xs visible-sm glyphicon glyphicon-home"></span>
                    </button>
                    <div class="col-sm-offset-1 col-sm-5 col-xs-8">
                        <select id="menu_langue" class="form-control">
                            <option selected="selected" disabled="true" style="display:none;">
                                Langage ? (Défaut : fr)
                            </option>
                            <option value="fr">Français</option>
                            <option value="en">Anglais</option>
                        </select>
                    </div>
                    <button id="aide" class="btn btn-warning pull-right col-sm-offset-1 col-sm-2 col-xs-2" data-toggle="modal" data-target="#modalAide">
                        <span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span>
                        <span class="hidden-xs hidden-sm"> Aide</span>
                    </button>
                </div>
                <br/>

                <!-- Panneau de cryptage -->
                <div class="row">
                    <legend>Cryptanalyse</legend>
                    <p>Copiez-collez dans la zone de texte ci-dessous le texte crypté, l'analyse sera lancée automatiquement.</p>

                    <div class="panel panel-default">
                        <div class="panel-heading" id="oubli">
                            Oublié de crypter le texte ? Cliquez !
                        </div>
                        <div class="panel-body" id="div_cryptage" style="display:none;">
                            <p>Rentrez, si ce n'est pas déjà fait, le texte non chiffré dans la zone de texte en-dessous du panneau, la clé de chiffrage dans le champ ci-dessous. L'analyse sera lancée juste après le cryptage.</p>
                            Clé :
                            <input type="text" id="cle2" name="cle"/>
                            <button id="action2">Crypter</button>
                        </div>
                    </div>
                </div>
                <br/>

                <!-- Zone de texte -->
                <div class="row">
                    <textarea rows=6 id="cryptedText" class="form-control"></textarea>
                    <br/>
                    <button id="restart" class="btn btn-default">
                        <span class="glyphicon glyphicon-refresh" aria-hidden="true"></span>
                        Recommencer l'analyse
                    </button>
                    <button id="resultat_cryptanalyse" class="btn btn-success" data-toggle="modal" data-target="#modalResultat">
                        <span class="glyphicon glyphicon-qrcode" aria-hidden="true"></span>
                        Afficher le texte décrypté
                    </button>
                </div>
                <br/>

                <legend>Résultats</legend>

                <!-- Tableau de la clé à deviner -->
                <h4>Clé à deviner</h4>
                <table class="table table-bordered">
                    <thead>
                        <tr>
                            <th class="col-xs-2 text-center">Taille</th>
                            <th class="col-xs-7 text-center">Changer de caractère</th>
                            <th class="col-xs-3 text-center" colspan=2>Indices de coincidence</th>
                        </tr>
                    </thead>
                    <tbody class="text-center">
                        <tr>
                            <td rowspan=2>
                                <div class="btn-group btn-group-lg hidden-xs">
                                    <button class="btn btn-danger cle_moins">
                                        <span class="glyphicon glyphicon-minus" aria-hidden="true"></span>
                                    </button>
                                    <button class="btn btn-primary cle_plus">
                                        <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
                                    </button>
                                </div>
                                <div class="btn-group-vertical btn-group-lg visible-xs">
                                    <button class="btn btn-primary cle_plus">
                                        <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
                                    </button>
                                    <button class="btn btn-danger cle_moins">
                                        <span class="glyphicon glyphicon-minus" aria-hidden="true"></span>
                                    </button>
                                </div>
                            </td>
                            <td rowspan=2>
                                <div class="row">
                                    <div class="col-sm-2 hidden-xs">
                                        <button class="btn btn-default pull-right cle_gauche">
                                            <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
                                        </button>
                                    </div>
                                    <div class="col-xs-12 col-sm-8" id="cle_trouvee_div">
                                        <p id="cle_trouvee"></p>
                                    </div>
                                    <div class="col-sm-2 hidden-xs">
                                        <button class="btn btn-default pull-left cle_droite">
                                            <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
                                        </button>
                                    </div>
                                    <br/>
                                    <a class="btn btn-default col-xs-6 visible-xs cle_gauche"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span></a>
                                    <a class="btn btn-default col-xs-6 visible-xs cle_droite"><span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
                                </div>
                            </td>
                            <td>Texte</td>
                            <td> <span id="ic_texte"></span> </td>
                        </tr>
                        <tr>
                            <td>Langue</td>
                            <td> <span id="ic_theorique"></span> </td>
                        </tr>
                    </tbody>
                </table>

                <div class="row">
                    <p>Faites rouler la molette de la souris, ou scrollez sur votre pavé tactile pour décaler l'histogramme des fréquences du texte crypté, tout en posant le curseur sur le graphique. Sinon, vous pouvez utiliser les boutons bleus juste en dessous.</p>
                    <!--<br/>
                    <div class="slider"></div>
                    <br/>
                    <a id="btn_decalage_gauche" class="btn btn-info col-xs-6">
                        <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
                    </a>
                    <a id="btn_decalage_droite" class="btn btn-info col-xs-6">
                        <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
                    </a>-->
                </div>
                <div class="row">
                    <div id="chart_div" class="center-block"></div>
                </div>
                <br/>
                <div class="row">
                    <label for="apercu">Voici ce que donne le décryptage si la clé ci-dessus est correcte ...</label>
                    <input type="text" id="apercu" class="form-control" disabled />
                </div>
            </div>
        </div>

        <footer class="footer">
            <div class="container">
                <div class="row">
                    <div class="col-xs-8">
                        <p>Image fournie par Razlan sur 
                            <a href="https://www.flickr.com/">flickr.com</a>
                             sous licence 
                            <a href="http://creativecommons.org/">CreativeCommons</a>
                        </p>
                    </div>
                    <div class="col-xs-4">
                        <object id="E" class="pull-right" type="image/svg+xml" data="http://mirrors.creativecommons.org/presskit/buttons/88x31/svg/by-nc-nd.eu.svg">
                        </object>
                    </div>
                </div>
            </div>
        </footer>

        <!-- -- Modal de présentation du chiffre de Vigenere -- -->

        <div class="modal fade" id="modalPresentation" tabindex="-1" role="dialog">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                        <h4 class="modal-title">Présentation du chiffre de Vigenère</h4>
                    </div>
                    <div class="modal-body">
                        <table id="table-pedagogie" class="table table-bordered table-striped table-centered">
                            <tr>
                                <td>M</td><td>E</td><td>S</td><td>S</td><td>A</td><td>G</td><td>E</td>
                                <td>S</td><td>E</td><td>C</td><td>R</td><td>E</td><td>T</td>
                            </tr>
                            <tr class="small-row">
                                <td>+</td><td>+</td><td>+</td><td>+</td><td>+</td><td>+</td><td>+</td>
                                <td>+</td><td>+</td><td>+</td><td>+</td><td>+</td><td>+</td>
                            </tr>
                            <tr>
                                <td>C</td><td>O</td><td>D</td><td>E</td><td>C</td><td>O</td><td>D</td>
                                <td>E</td><td>C</td><td>O</td><td>D</td><td>E</td><td>C</td>
                            </tr>
                            <tr class="small-row">
                                <td>=</td><td>=</td><td>=</td><td>=</td><td>=</td><td>=</td><td>=</td>
                                <td>=</td><td>=</td><td>=</td><td>=</td><td>=</td><td>=</td>
                            </tr>
                            <tr>
                                <td>O</td><td>S</td><td>V</td><td>W</td><td>C</td><td>U</td><td>H</td>
                                <td>W</td><td>G</td><td>Q</td><td>U</td><td>I</td><td>V</td>
                            </tr>
                        </table>

                        <p>Voilà ! C'est simple le chiffre de Vigenere, non ? Allez, on va expliquer plus en détails.</p>

                        <h4>Explications</h4>

                        <p>Le chiffre (ou chiffrement) de Vigenère est un procédé de cryptographie polyalphabétique, c'est-à-dire qu'on utilise un mot appelé "clé" de plusieurs lettres pour réaliser le chiffrement (ici, c'est le mot "CODE").</p>
                        <p>On procède à un décalage de l'alphabet déterminé par le caractère de la clé. Par convention, 'A' correspond à un décalage nul, 'B' un décalage de 1, 'C' de 2, etc... Exemple : pour la lettre 'M', je code avec un 'C', et la lettre devient un 'O' (M -> N -> O). Et si on déborde et qu'on va plus loin que le 'Z', et bien, on repart pour un tour : Y -> Z -> A -> B...</p>
                        <p>Ce principe de décalage implique qu'une lettre est associée à une et une seule autre lettre par cette transformation.</p>
                        <p>Or, l'interêt du chiffre de Vigenère est que deux lettres identiques du texte à crypter ne donnent pas toujours les mêmes lettres dans le texte crypté et vice versa.</p>

                        <h4>Pourquoi ? Et comment décrypter alors ?</h4>

                        <p>Si vous utilisez une clé d'une seule lettre, le décalage appliqué est identique pour toutes les lettres. Et déterminer le décalage unique à tout le texte est très simple : trouvez la lettre qui apparaît le plus dans le texte crypté, et on est presque sûr qu'elle correspond à la lettre la plus fréquente théoriquement dans la langue du texte à déchiffrer. Une petite soustraction, et on a la taille du décalage ! Pour la culture (c'est pour moi, c'est cadeau), ce chiffrage monoalphabétique s'appelle chiffre de César.</p>
                        <p>Pour le chiffre de Vigenère (avec une clé de N lettres), l'astuce va etre la même, mais il va falloir au préalable deviner la taille de la clé. Et si on devine juste, on sait alors que, périodiquement (1 fois sur N), une lettre du texte crypté correspond toujours à la même lettre du texte à déchiffrer (parce qu'elle a été codée avec le même caractère de la clé, regardez dans le tableau au-dessus les deux S qui deviennent des W).</p>

                        <h4>J'ai toujours pas compris !</h4>

                        <p>Et bien, il vous reste ... <a href="http://fr.wikipedia.org/wiki/Chiffre_de_Vigen%C3%A8re" target="_blank">la page Wikipédia !</a> On ne sait jamais.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- -- Modal de présentation du texte décrypté par cryptanalyse -- -->

        <div class="modal fade" id="modalResultat" tabindex="-1" role="dialog">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                        <h4 class="modal-title">Résultat de la cryptanalyse</h4>
                    </div>
                    <div class="modal-body">
                        <p id="decryptedText"></p>
                    </div>
                    <div class="modal-footer">
                        Merci d'avoir utilisé notre application !
                    </div>
                </div>
            </div>
        </div>

        <!-- -- Modal d'aide à l'utilisation du module de cryptanalyse -- -->

        <div class="modal fade" id="modalAide" tabindex="-1" role="dialog">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                        <h4 class="modal-title">Comment utiliser l'application de cryptanalyse ?</h4>
                    </div>
                    <div class="modal-body">
                        Des explications, des illustrations de l'application ici !
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Scripts exterieurs : jQuery, Bootstrap et Google Charts -->
        <script src="https://code.jquery.com/jquery-2.1.1.js"></script>
        <script src="https://code.jquery.com/ui/1.11.1/jquery-ui.js"></script>
        <!--<script src="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>-->
        <script type="text/javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
        <script type="text/javascript" src="https://www.google.com/jsapi"></script>

        <!-- Scripts internes -->
        <script type="text/javascript" src="js/slider-pips.js"></script>
        <script type="text/javascript" src="js/anim-titre.js"></script>
        <script type="text/javascript" src="js/variables.js"></script>
        <script type="text/javascript" src="js/fonctions.js"></script>
        <script type="text/javascript" src="js/evenements.js"></script>
    </body>
</html>